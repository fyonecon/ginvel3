
## äº†è§£ï¼ˆå½“å‰ç‰ˆæœ¬ï¼šgv3.^ï¼‰

>ä»‹ç»ğŸ“–ï¼šGinvelæ˜¯ä¸€ä¸ªMVC+RPCçš„Golangå¾®æœåŠ¡æ¡†æ¶ï¼ŒHttpåŸºäºGinï¼ŒDDDæœåŠ¡åŸºäºgRPCã€‚æ¡†æ¶éœ€è¦ã€Œ Go1.17^ + MySQL5.7^ + Redis5^ + CPUæ ¸å¿ƒ2^ ã€çš„è¿è¡Œç¯å¢ƒï¼Œå¼€å‘å’Œéƒ¨ç½²æ¯”è¾ƒçµæ´»ã€‚
> 
> ç‰¹ç‚¹ğŸªœï¼šGinvelä¼šåˆ©ç”¨å°½å¯èƒ½å¤šçš„é»˜è®¤å€¼æ¥ä»£æ›¿æˆ–å‡å°‘æŠ¥é”™æé†’ï¼›Ginvelé‡‡ç”¨"å®½è¿›ä¸¥å‡º"çš„åŸåˆ™ï¼›Ginvelå°è£…äº†å¤§é‡æ•°æ®å¤„ç†çš„å‡½æ•°ï¼Œåšåˆ°å¼€ç®±å³ç”¨ï¼Œè¯­æ„åŒ–è¡¨è¾¾ã€‚
> 
> å§Šå¦¹ğŸ‘©ï¼šGinvelæ˜¯GinLaravelçš„éš¾åº¦ç‰ˆï¼ˆå‡çº§ç‰ˆï¼‰ã€‚Ginvelä½¿ç”¨èµ·æ¥å¯èƒ½æ¯”è¾ƒéš¾ï¼Œå…¥é—¨éš¾ã€æ“ä½œéš¾ã€é˜…è¯»éš¾ã€‚
>

Ginvel3æ¡†æ¶ä»“åº“ï¼š
>ï¼ˆå¤§é™†ğŸ‡¨ğŸ‡³ï¼‰https://bitbucket.org/ginvel/ginvel3
> 
>ï¼ˆæ¨èğŸ”¥ï¼‰https://github.com/fyonecon/ginvel3

GinLaravelæ¡†æ¶ä»“åº“ï¼š
>https://github.com/fyonecon/ginlaravel

## ç°å·²æ”¯æŒ
> Go-MySQLã€GORMï¼ˆv2ï¼‰ã€Go-Redisã€çƒ­æ›´ï¼ˆfreshï¼‰ã€Swaggerã€MVCï¼ˆä¸æ¨èä½¿ç”¨ï¼‰ã€HTMLæ¨¡ç‰ˆè¾“å‡ºã€Httpè®¿é—®é¢‘ç‡æ‹¦æˆªã€Httpç†”æ–­æœºåˆ¶ã€HttpCorsã€å¯¹ç§°åŠ å¯†ï¼ˆå¯ä¸­æ–‡ï¼‰ã€httpæ‹¦æˆªå™¨ã€ç†”æ–­ã€å¤šå±‚è·¯ç”±ã€åˆ†è¯ä¸å…¨æ–‡æ£€ç´¢ã€è¿è¡Œæ—¶ç›‘æ§ã€å›¾å½¢éªŒè¯ç ã€ç”Ÿæˆå’Œè¯»å–Excelã€å…¨å±€å®šæ—¶å™¨ç­‰ã€‚

> æµ‹è¯•è¿‡çš„å®¢æˆ·ç«¯ç¯å¢ƒç­‰ï¼šVue3+Axiosã€Fetchã€POSTï¼ˆx-www-form-urlencodedï¼‰ã€GETã€Centos7ã€Macã€‚

## è®¾è®¡ç†å¿µ
> å®½è¿›ä¸¥å‡ºï¼ŒåŠŸèƒ½ç»„åˆå¼ï¼Œé¢å‘Apiï¼Œé€‚åˆå¤æ‚é¡¹ç›®ï¼Œä»»ä½•å‚æ•°æˆ–æœåŠ¡éƒ½ä¼šæœ‰é»˜è®¤å€¼ã€‚æ•´ä¸ªé¡¹ç›®è¿è¡Œéœ€go(1.17+<2021~>)+mysql+redisï¼

> stateçŠ¶æ€ç ç¤ºæ„ï¼š1è¯·æ±‚æˆåŠŸ+æ¥å£æœ‰æ•°æ®ï¼ŒStatusCodeä¸º200ï¼›0è¯·æ±‚æˆåŠŸ+æ¥å£æ— æ•°æ®ï¼ŒåŒ…å«è¯·æ±‚æ¡ä»¶ä¸è¶³ï¼ŒStatusCodeä¸º200ï¼›403è¢«æ‹’ç»è®¿é—®ï¼ŒStatusCodeä¸º403ï¼›404æ¥å£åç§°é”™è¯¯ï¼ŒStatusCodeä¸º404ï¼›429è¯·æ±‚é¢‘ç‡é™åˆ¶æˆ–è¯·æ±‚æ‹¥æŒ¤ï¼ŒStatusCodeä¸º429ï¼›500æœåŠ¡å™¨ä»£ç é”™è¯¯ï¼ŒStatusCodeä¸º500ã€‚

> é»˜è®¤ç«¯å£ï¼šhttpé»˜è®¤9500ï¼Œgrpcé»˜è®¤9600

## è·¯ç”±å‘¨æœŸ
> varå…¨å±€å‚æ•°+init()+main â¡ï¸ è¯·æ±‚è·¯ç”±å â¡ï¸ headerè¿‡æ»¤ â¡ï¸ æ‹¦æˆªè¯·æ±‚é¢‘ç‡ â¡ï¸ è¯·æ±‚ç†”æ–­æœºåˆ¶ â¡ï¸ æ ¡éªŒè¯·æ±‚æ–¹æ³•å’ŒTokenå‚æ•° â¡ï¸ è¿è¡Œç›®æ ‡å‡½æ•° â¡ï¸ Controllerç¨‹åºå¹¶è¿”å›Json â¡ï¸ æ²»ç†æˆ–è¿è¡Œæ—¶ç›‘æ§æœåŠ¡ â¡ï¸ ç¨‹åºç»“æŸ

## é¡¹ç›®ç›®å½•
+ /app/ â€» ä½ çš„é¡¹ç›®ç›®å½•

+ /app/request/ â€» httpï¼ˆapiã€wsï¼‰ã€rpcæ§åˆ¶å™¨ç›®å½•ï¼Œè¿™æ˜¯ä½ å†™é¡¹ç›®ä»£ç çš„åœ°æ–¹

+ /app/arm/ â€» é¡¹ç›®è¿è¡Œæ—¶æ²»ç†ï¼ˆè¾…åŠ©æ•°æ®é‡‡é›†ï¼‰

+ /bootstrap/ â€» æ¡†æ¶å¯åŠ¨ï¼Œé©±åŠ¨å¯åŠ¨

+ /common/helper/ â€» å…¬å…±å‡½æ•°ï¼ŒåŠ©æ‰‹å‡½æ•°

+ /common/kits/ â€» å…¬å…±å°è£…æ’ä»¶

+ /docs/ â€» swaggeræ–‡ä»¶ç›®å½•

+ /internal/ â€» æ¡†æ¶åŸºç¡€

+ /internal/reader/ â€» è¯»å–é…ç½®æ–‡ä»¶

+ /internal/processes/ â€» æ¡†æ¶è¿è¡Œæ—¶

+ /internal/middlewares/ â€» æ¡†æ¶ä¸­é—´ä»¶

+ /internal/providers/ â€» æ¡†æ¶æœåŠ¡æä¾›ï¼ˆåˆå§‹åŒ–æœåŠ¡ï¼‰

+ /routes/xxx_group/ â€» xxxåˆ†ç»„è·¯ç”±ï¼ŒåŒ…æ‹¬apiã€htmlæ¨¡æ¿ã€websocketä¸‰ä¸ªè·¯ç”±ï¼Œérpcè·¯ç”±

+ /storage/ â€» ç³»ç»Ÿæ—¥å¿—ã€æ–‡ä»¶ä¸Šä¼ ã€é™æ€ç¼“å­˜ã€tomlé…ç½®æ–‡ä»¶ç­‰ã€‚ç›®å½•éœ€æƒé™777ï¼ˆchmod -R 777 storageï¼‰ã€‚

+ Dockerfile â€» æ‰§è¡ŒDockerå‘½ä»¤çš„æ–‡ä»¶

+ runner.conf â€» freshè‡ªåŠ¨åˆ·æ–°å‚æ•°é…ç½®æ–‡ä»¶

+ ginvel â€» æˆ–åä¸º"main"ï¼Œé¡¹ç›®ç”Ÿäº§çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒç”¨ã€‚ç›®å½•éœ€æƒé™773ã€‚

+ go.mod â€» é¡¹ç›®æ‰€ä¾èµ–çš„moduleè·¯å¾„ã€ç¬¬ä¸‰æ–¹åº“ç­‰çš„å¼•å…¥

+ main.go â€» è·‘èµ·æœ¬é¡¹ç›®çš„å…¥å£mainæ–‡ä»¶ã€‚

## å‘½ååŸåˆ™
+ è‡ªå®šä¹‰å‡½æ•°ï¼šå¤§é©¼å³°
+ è‡ªå®šä¹‰å˜é‡ï¼šå°é©¼å³°
+ è‡ªå®šä¹‰ç±»ï¼šå¤§é©¼å³°
+ è‡ªå®šä¹‰ç»“æ„ä½“å’Œç»“æ„ä½“æˆå‘˜ï¼šå¤§é©¼å³°
+ MySQLã€Redisï¼šå°å†™+ä¸‹åˆ’çº¿
+ æ¥å£åï¼šå°å†™+ä¸‹åˆ’çº¿
+ ç³»ç»Ÿé›†æ–‡ä»¶å¤¹åæˆ–æ–‡ä»¶åï¼šå°å†™
+ è‡ªå®šä¹‰æ–‡ä»¶å¤¹åï¼šå¤§é©¼å³°


## åŸºç¡€ç¯å¢ƒ
> 1âƒ£ï¸Goè¿è¡Œç¯å¢ƒ
>
> ï¸æ­å»ºGoå’ŒåŸºç¡€Ginç¯å¢ƒè¯·å‚è€ƒï¼šhttps://blog.csdn.net/weixin_41827162/article/details/115693925

> 2âƒ£ï¸MySQL5.7+
>
> è¯·å°†/é¡¹ç›®èµ„æ–™/ginlaravel.sql æ–‡ä»¶å¯¼å…¥åˆ°ä½ çš„æ•°æ®åº“

> 3âƒ£ï¸Redis
>
> è¯·æå‰å¼€å¯ä½ çš„RedisæœåŠ¡

> cmdä¸­è¿è¡Œã€Œ go run main.go ã€å³å¯å¯åŠ¨é¡¹ç›®ã€‚
>
> æˆ–ä½¿ç”¨çƒ­æ›´æ–¹å¼å¯åŠ¨httpæœåŠ¡ï¼Œåœ¨cmdä¸­ç›®å½•è¿è¡Œ"fresh"ã€‚v1.4å¼€å§‹ä¸ºé€‚é…swaggoé‚å°†server.goæ›´åä¸ºmain.goã€‚

> è®¿é—®
>
> http://127.0.0.1:9500

> é¡¹ç›®ä¸Šçº¿
>
> serverConfig["ENV"]çš„å€¼æ”¹æˆreleaseï¼Œç„¶åä½¿ç”¨ä»¥ä¸ŠåŒæ ·æ–¹æ³•è¿è¡Œã€‚

## å¦‚ä½•åˆå§‹åŒ–é¡¹ç›®
ä»¥å½“å‰ç›®å½• /Users/fyonecon/go/src/ ä¸ºä¾‹
```cmd
è·å–æºä»£ç ï¼š
cd go/src
git clone https://github.com/fyonecon/ginvel3.git

åˆå§‹åŒ–é¡¹ç›®ï¼š
go mod init

æ¸…é™¤ä¸éœ€è¦çš„vendorä¸­çš„ç¬¬ä¸‰æ–¹æ‰©å±•ï¼š
go mod tidy
    
é‡æ–°è½½å…¥vendorä¸­çš„ç¬¬ä¸‰æ–¹æ‰©å±•ï¼š
go mod vendor

å°†é¡¹ç›®æ‰“åŒ…æˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼š
go build -mod=mod
ï¼ˆè¿è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶éœ€è¦ginvelçš„æ–‡ä»¶çš„æƒé™ä¸ºï¼šchmod 773 ginvelï¼‰

åœ¨/stoarge/config_toml/local.framkwork.tomlé…ç½®æ¡†æ¶å‚æ•°ã€mysqlã€redisã€esç­‰ä¿¡æ¯ã€‚

å¯åŠ¨httpæœåŠ¡ï¼š
go run main.go

æˆ– å¯åŠ¨äºŒè¿›åˆ¶æ–‡ä»¶httpæœåŠ¡ï¼š
./ginvel


```

[comment]: <> (## GoåŒ…ç®¡ç†å·¥å…·Vendor)

[comment]: <> (```apacheconf)

[comment]: <> (ä¸‹è½½govendorå·¥å…·åˆ°æœ¬åœ°ï¼š)

[comment]: <> (go get -u github.com/kardianos/govendor)

[comment]: <> (ç”Ÿæˆvendoræ–‡ä»¶å¤¹ï¼ˆå­˜æ”¾ä½ é¡¹ç›®éœ€è¦çš„ä¾èµ–åŒ…ï¼‰å’Œvendor.jsonï¼š)

[comment]: <> (govendor init)

[comment]: <> (å°†GOPATHæ–‡ä»¶å¤¹ä¸­çš„åŒ…æ·»åŠ åˆ°vendorç›®å½•ä¸‹ï¼š)

[comment]: <> (govendor add +external)

[comment]: <> (æˆ–è€…govendor add +e)

[comment]: <> (æˆ–è€…govendor add +e)

[comment]: <> (govendor update +vendor # æ›´æ–°vendorçš„åŒ…å‘½ä»¤)

[comment]: <> (govendor list)

[comment]: <> (# govendor fetch github.com/xxx)

[comment]: <> (```)

## è¿è¡Œfreshçƒ­æ›´æœåŠ¡ï¼ˆMacç¯å¢ƒï¼‰
ä»¥é¡¹ç›®ç›®å½• /Users/fyonecon/go/src/ginvel ä¸ºä¾‹
```cmd
å®‰è£…freshï¼š
go get github.com/pilu/fresh

å».bash_profileæ–‡ä»¶ç›®å½•ï¼š
cd ~

é‡æ–°ç¼–è¯‘é…ç½®æ–‡ä»¶ï¼š
source ~/.bash_profile

åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼š
cd go/src/ginvel

å¼€å¯çƒ­æ›´ï¼ˆå…¶ä¸­é¡¹ç›®"/storage/"ç›®å½•åŠå…¶å­ç›®å½•éœ€è¦777æƒé™ã€‚ï¼‰ï¼š
fresh

é€€å‡ºhttpæœåŠ¡ç”¨å¿«æ·é”®ï¼šCtrl + C ã€‚æˆ–ç›´æ¥å…³é—­ç»ˆç«¯çª—å£ã€‚

æ³¨æ„ï¼Œåœ¨Macå¼€å‘ç¯å¢ƒä¸­ï¼š
ä»¥ä¸Šæ‰€ç”¨å‘½ä»¤åœ¨Golandçš„terminalé‡Œé¢åªè¿è¡Œfreshå°±å¯ä»¥äº†ï¼Œ
ä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œä¹Ÿå¯åœ¨iterm2è½¯ä»¶é‡Œé¢è®¾ç½®shellä¸€æ¬¡æ€§è¿è¡Œï¼š
iterm2â€”â€”è®¾ç½®â€”â€”Profilesâ€”â€”ç‚¹å·¦ä¾§æ–°å»ºâ€”â€”General
â€”â€”Cammandï¼ˆé€‰æ‹© Login Shellï¼‰å¡«å…¥æ‹¬å·é‡Œé¢
ã€cd ~; source ~/.bash_profile; cd /Users/fyonecon/go/src/ginvel; fresh;ã€‘
å†…å®¹å³å¯ã€‚

```
ä»¥ä¸Šå³å¯é¡¹ç›®å¼€å¯çš„freshçƒ­æ›´æœåŠ¡ã€‚
è‹¥æƒ³ä¸€ç›´å¼€å¯ç»ˆç«¯çª—å£ï¼Œè¯·ä½¿ç”¨screenï¼ˆyum install screenï¼‰æ¥ä¿æŒçª—å£ã€‚

> çƒ­æ›´æœåŠ¡æ–‡æ¡£ï¼šhttps://github.com/gravityblast/fresh ã€‚

## Swaggeræ¥å£æ–‡æ¡£
>å®˜æ–¹æ•™ç¨‹ï¼šhttps://github.com/swaggo/gin-swagger

å®‰è£…æ•™ç¨‹ï¼Œåœ¨/routes/route_default.goè·¯ç”±æ–‡ä»¶é‡Œé¢ï¼Œä¸éœ€è¦å†æ¬¡å®‰è£…å’Œå¼•å…¥ã€‚ï¼‰å¦‚ä¸‹ï¼š
```cmd
1ã€‚è¿›å…¥é¡¹ç›®è·Ÿç›®å½•

2ã€‚å®‰è£…swagå‘½ä»¤ï¼š
go get -u github.com/swaggo/swag/cmd/swag

3ã€‚æŸ¥çœ‹æ˜¯å¦å‘½ä»¤æ˜¯å¦å®‰è£…æˆåŠŸï¼š
swag -v

3.1ã€‚å®‰è£…docs
swag init

3.2ã€‚åˆ‡æ¢åˆ°vendorç›®å½•ï¼Œå°†swaggoå®‰è£…åœ¨vendorç›®å½•ä¸‹è€Œä¸æ˜¯å…¨å±€å®‰è£…ï¼š
cd vendor

4ã€‚å®‰è£… gin-swaggerï¼š
go get -u github.com/swaggo/gin-swagger
go get -u github.com/swaggo/files
go mod vendor

5ã€‚åœ¨routeé‡Œé¢importå¼•å…¥swagï¼š
import (
	swaggerFiles "github.com/swaggo/files"
	ginSwagger "github.com/swaggo/gin-swagger"
	_ "ginlaravel/docs" // docs is generated by Swag CLI, you have to import it.
)

5.1ã€‚ä¹¦å†™è·¯ç”±ï¼š
url := ginSwagger.URL("http://127.0.0.1:8090/swagger/doc.json") // The url pointing to API definition
route.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler, url))

5.2ã€‚å¯åŠ¨httpæœåŠ¡ï¼šgo run main.go

5.3ã€‚è®¿é—®ï¼šhttp://127.0.0.1:8090/swagger/index.html
```

## å°†é¡¹ç›®æ‰“åŒ…æˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆMacã€Centosç¯å¢ƒï¼‰
```cmd
#1ã€‚åœ¨ginvelé¡¹ç›®æ ¹ç›®å½•ä¸ºä¾‹ï¼š
go build -mod=mod

ï¼ˆæˆ– go build main.go ï¼Œmainæ–‡äºŒè¿›åˆ¶æ–‡ä»¶å°†æ˜¯ç›®æ ‡æ–‡ä»¶ã€‚ï¼‰

#æ­¤æ—¶ï¼Œåœ¨é¡¹ç›®ç›®å½•ç”Ÿæˆæˆ–æ›´æ–°äº†åå­—å«åš"ginvel"äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å…¶ä¸­"ginvel"æ˜¯go moduleçš„åå­—ï¼Œè¿™æ˜¯çº¦å®šå¥½çš„åç§°ã€‚
    
#2ã€‚å¼€å¯æ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™ï¼š
chmod 773 ginvel
        
#3ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š
./ginvel

ï¼ˆæˆ– ./mainï¼‰
        
#å³å¯å¼€å¯äºŒè¿›åˆ¶æœåŠ¡ã€‚

# âš ï¸æç¤ºï¼šåˆ©ç”¨äºŒè¿›åˆ¶æœåŠ¡å¼€å¯webæœåŠ¡çš„æœ€å°ä»£ç å’Œç›®å½•ä¸ºï¼š
/storage/ ç›®å½•åŠå…¶å­ç›®å½•ï¼Œæƒé™777ï¼ˆchmod -R 777 storageï¼‰
runner.conf æ–‡ä»¶ï¼Œæƒé™755
ginvelæˆ–mainäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ æ–‡ä»¶ï¼Œæƒé™773æˆ–777ã€‚ï¼ˆchmod 773 ginvelæˆ–chmod 773 mainï¼‰

```

## å°†é¡¹ç›®ç¼–è¯‘æˆexeå¯æ‰§è¡Œæ–‡ä»¶
```cmd
CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build main.go

```

## å°†Goé¡¹ç›®éƒ¨ç½²åœ¨Centos7ä¸Šï¼ˆGoç¯å¢ƒæ­å»ºã€æœåŠ¡å™¨ç¯å¢ƒæ­å»ºã€æ•°æ®åº“ç¯å¢ƒæ­å»ºï¼‰
> æ•™ç¨‹ï¼šhttps://blog.csdn.net/weixin_41827162/article/details/116048754

## å¦‚ä½•å°†GOPATHé‡Œé¢çš„"go get xxx"æ‰©å±•å¼•ç”¨åˆ°vendoré‡Œé¢
> å…ˆè¿è¡Œ"go get æ‰©å±•githubåœ°å€"ï¼Œåœ¨é¡¹ç›®ä¸­importå¼•å…¥"xxx"æ‰©å±•
>
> å†åœ¨é¡¹ç›®è·Ÿç›®å½•è¿è¡Œ"go mod vendor"
>
> è¿™æ ·å°±å¯ä»¥å°†æ‰©å±•è‡ªåŠ¨å¼•ç”¨åˆ°vendorç›®å½•ä¸‹è€Œä¸ç”¨govendorã€‚

## å°†goé¡¹ç›®éƒ¨ç½²åˆ°centos7çš„dockerä¸­
```dockerfile

#1.1ï¼‰docker imagesæŸ¥çœ‹åˆ¶ä½œ
FROM golang:latest as builder
# ä¿®æ”¹ç³»ç»Ÿä¸ºä¸Šæµ·æ—¶åŒº
RUN echo "Asia/Shanghai" > /etc/timezone \
 && rm /etc/localtime && dpkg-reconfigure -f noninteractive tzdata
#ä½œè€…
MAINTAINER fyonecon "fyonecon@gmail.com"
#è®¾ç½®å·¥ä½œç›®å½•ï¼ˆæš‚æ—¶è§„å®šæœ€ç»ˆæ–‡ä»¶å¤¹åä¸moduleåç›¸åŒï¼‰
WORKDIR $GOPATH/src/ginvel
#å°†æœåŠ¡å™¨çš„goå·¥ç¨‹ä»£ç åŠ å…¥åˆ°dockerå®¹å™¨ä¸­
ADD . $GOPATH/src/ginvel
#ä¿®æ”¹envå‚æ•°
RUN go env -w GO111MODULE=on
RUN go env -w GOPROXY=https://goproxy.cn,direct
RUN export GIN_MODE=release
#åˆå§‹åŒ–æ¡†æ¶æ‰€éœ€æ‰©å±•
# RUN go mod vendor
#ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶
RUN go build main.go
#RUN go build -o /tmp/main main.go
#æš´éœ²ç«¯å£
EXPOSE 9500
EXPOSE 9600
#æœ€ç»ˆè¿è¡Œdockerçš„å‘½ä»¤ï¼ˆè¿è¡Œé¡¹ç›®ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰
ENTRYPOINT  ["./main"]

#FROM debian:slim
#WORKDIR /go/bin
#COPY --from=builder /tmp/main ./main
#ENTRYPOINT ["/go/bin/main"]

######### Dockerfileæ•™ç¨‹ #########

#1.2ï¼‰åˆ¶ä½œdockeré•œåƒï¼Œå•ç‹¬åœ¨é¡¹ç›®è·Ÿç›®å½•è¿è¡Œï¼ˆè¿™ä¸ªdockeré•œåƒåå¯ä»¥è‡ªå®šä¹‰ï¼Œä¸€èˆ¬ä¸æ–‡ä»¶å¤¹åæˆ–moduleåä¸€æ ·å³å¯ï¼‰ï¼š
#å°†Dockfileæ–‡ä»¶æ”¾ç½®åœ¨é¡¹ç›®è·Ÿç›®å½•ï¼Œç„¶åè¿è¡Œ
#docker build -t ginvel .
#æŸ¥çœ‹é•œåƒ
#docker images
#æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„docker
#docker ps
#æŸ¥çœ‹dockerå ç”¨å†…å­˜å¤§å°
#docker ps -as

#2ï¼‰dockerè¿è¡Œé•œåƒï¼Œè¿è¡Œç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ä¸ºé¡¹ç›®go.modé‡Œé¢çš„moduleåï¼Œä¸å¯æ›´æ”¹ã€‚åŠå…¶é‡å¯åï¼Œdockerçš„ç«¯å£æ˜ å°„éœ€è¦é‡æ–°è¿è¡Œã€‚ï¼‰
#ç¬¬ä¸€ä¸ªç«¯å£ä¸ºå®¿ä¸»æœºç«¯å£ï¼Œç¬¬äºŒä¸ªç«¯å£ä¸ºdockerç«¯å£ï¼Œæ³¨æ„httpserverçš„hostæ˜¯0.0.0.0ã€‚
#å¼€å¯dockerï¼ˆå‰å°æ–¹å¼ï¼‰
#docker run -p 9500:9500 ginvel
#å¼€å¯dockerï¼ˆåå°æ–¹å¼ï¼Œæ¨èï¼‰
#docker run -p 9500:9500 -d ginvel

# å¦‚æœ‰å¼€å¯rpcç­‰å¿…è¦ï¼Œè¯·å¼€å¯9600ç«¯å£ï¼ˆå‚è€ƒhttp-9500æ–¹æ³•ï¼‰

#2.1ï¼‰æŸ¥çœ‹å·²è¿è¡Œçš„docker
#docker ps

#3ï¼‰æŸ¥çœ‹dockeræ—¥å¿—
#docker logs -f ginvel

#4ï¼‰å…¶ä»–ï¼ˆå¯ä»¥ä½¿ç”¨docker buildçš„åæˆ–é•œåƒidï¼Œç”¨docker imagesæŸ¥çœ‹ï¼‰
#åœæ­¢æœåŠ¡
#docker stop ginvel
#åˆ é™¤containerå®ä¾‹
#docker rm ginvel
#åˆ é™¤containeré•œåƒ
#docker rmi ginvel
#å¼ºè¡Œåˆ é™¤containeré•œåƒ
#docker rmi -f ginvel

#5ï¼‰è¿›å…¥dockerçš„å‘½ä»¤
#æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„dockerçš„idï¼ˆdocker imagesä¸è¡Œï¼‰
#sudo docker ps
#è¿›å…¥docker
#sudo docker exec -it æ­£åœ¨è¿è¡Œçš„dockerçš„id /bin/bash

```
## å•å…ƒæµ‹è¯•testing
è¿è¡Œå•å…ƒæµ‹è¯•éœ€è¦cdåˆ°ç›¸å…³æ–‡ä»¶çš„ç›®å½•ï¼ˆæœ‰xxx_test.goçš„ç›®å½•ï¼Œä¾‹å¦‚cd internal/helper/ï¼‰ï¼Œç„¶åè¿è¡Œï¼š
```cmd
go test
```
æ³¨æ„ï¼šæœ¬æ¡†æ¶æœ¬èº«ä¸€èˆ¬ä¸éœ€è¦å•å…ƒæµ‹è¯•ï¼ˆå› ä¸ºåœ¨æºä»£ç å·²ç»åšäº†å„ç§å¯èƒ½æ¡ä»¶çš„åˆ¤æ–­ã€è¿‡æ»¤ã€é™åˆ¶ï¼‰ã€‚ä½ å¯ä»¥ç”¨å•å…ƒæµ‹è¯•æ¥æµ‹è¯•ä½ çš„è‡ªå®šä¹‰å‡½æ•°å³å¯ã€‚

## ä½œè€…Author
> https://github.com/fyonecon
> 
> fyonecon@gmail.com

## Ginvelç‰ˆæƒ
Apache2.0 - go.ginvel.com
